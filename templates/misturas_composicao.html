{% extends 'base.html' %}
{% block content %}
<h1>Composição: {{ mistura.nome }}</h1>
<form method="POST" class="row g-3 mb-3">
  <div class="col-md-6">
    <select name="material_id" class="form-select">
      <option value="0">-- selecionar material --</option>
      {% for m in materiais %}
        <option value="{{ m.id }}">{{ m.nome }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-3"><input name="percentagem" class="form-control" placeholder="Percentagem" required></div>
  <div class="col-md-3"><button class="btn btn-success">Adicionar</button></div>
</form>

<h3>Componentes</h3>
<table class="table">
  <thead><tr><th>Material</th><th>%</th><th>Ações</th></tr></thead>
  <tbody>
    {% for c in componentes %}
      <tr>
        <td>{{ c.material.nome }}</td>
        <td>{{ c.percentagem }}</td>
        <td>
          <form method="POST" action="{{ url_for('misturas_composicao_delete', mistura_id=mistura.id, comp_id=c.id) }}" style="display:inline">
            <button class="btn btn-sm btn-danger">Remover</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
<p>Total: {{ total_pct }}%</p>
{% endblock %}
