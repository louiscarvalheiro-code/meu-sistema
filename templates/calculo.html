
{% extends "base.html" %}
{% block content %}
<h2 class="mb-4 text-primary">Cálculo de Mistura</h2>
<form method="POST" class="row g-3 mb-3">
  <div class="col-md-4">
    <label class="form-label">Mistura</label>
    <select name="mistura_id" class="form-select">
      <option value="">-- Selecionar --</option>
      {% for m in misturas %}
        <option value="{{ m.id }}">{{ m.nome }} (Baridade: {{ m.baridade }})</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-2">
    <label class="form-label">Espessura (m)</label>
    <input type="number" step="0.01" name="espessura" class="form-control" required>
  </div>
  <div class="col-md-2">
    <label class="form-label">Produção diária (ton)</label>
    <input type="number" step="1" name="producao" class="form-control" required>
  </div>
  <div class="col-md-2">
    <label class="form-label">Distância (km)</label>
    <input type="number" step="1" name="distancia" class="form-control" required>
  </div>
  <div class="col-md-1">
    <label class="form-label">Dificuldade</label>
    <input type="number" min="1" max="5" name="dificuldade" class="form-control" required>
  </div>
  <div class="col-md-1">
    <label class="form-label">Lucro %</label>
    <input type="number" step="0.1" name="lucro" class="form-control" required>
  </div>
  <div class="col-12 text-center mt-2">
    <button class="btn btn-primary btn-lg" type="submit">Calcular</button>
  </div>
</form>

{% if resultado %}
  <div class="card mt-3">
    <div class="card-body">
      <h5>Resumo do cálculo</h5>
      <ul>
        <li>Fixos por ton: {{ resultado.fixo_por_ton }} €/ton</li>
        <li>Variáveis por ton: {{ resultado.variavel_por_ton }} €/ton</li>
        <li>Custo mistura: {{ resultado.custo_mistura }} €/ton</li>
        <li>Custo transporte: {{ resultado.custo_transporte }} €/ton</li>
        <li>Baridade: {{ resultado.baridade }}</li>
      </ul>
      <h4 class="text-success">Preço Final: {{ resultado.preco_final }} €/ton</h4>
    </div>
  </div>
{% endif %}
{% endblock %}
