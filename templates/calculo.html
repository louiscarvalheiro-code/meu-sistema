{% extends 'base.html' %}
{% block content %}
<h2>Cálculo</h2>
<form method="POST">
  <div class="mb-3">
    <label>Mistura</label>
    <select name="mistura" class="form-select">
      {% for m in misturas %}
      <option value="{{ m.id }}">{{ m.nome }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label>Espessura (m)</label>
    <input type="number" step="0.01" name="espessura" class="form-control" required>
  </div>
  <div class="mb-3">
    <label>Produção diária (ton)</label>
    <input type="number" step="0.01" name="producao" class="form-control" required>
  </div>
  <div class="mb-3">
    <label>N ciclos</label>
    <input type="number" name="ciclos" class="form-control" value="{{ diversos.n_ciclos }}" required>
  </div>
  <div class="mb-3">
    <label>Lucro (%)</label>
    <input type="number" step="0.01" name="lucro" class="form-control" value="10" required>
  </div>
  <button type="submit" class="btn btn-primary">Calcular</button>
</form>

{% if resultado %}
<div class="alert alert-success mt-4">
  <h4>Resultado</h4>
  <p><strong>Mistura:</strong> {{ resultado.mistura }}</p>
  <p><strong>Espessura:</strong> {{ resultado.espessura }} m</p>
  <p><strong>Produção diária:</strong> {{ resultado.producao }} ton</p>
  <p><strong>Ciclos:</strong> {{ resultado.ciclos }}</p>
  <p><strong>Lucro:</strong> {{ resultado.lucro }}%</p>
  <h5>Valor final: {{ resultado.valor }} €/ton</h5>
</div>
{% endif %}
{% endblock %}
